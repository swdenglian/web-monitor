"use strict";var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};function n(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}var r=function(){return(r=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o]);return t}).apply(this,arguments)},e=navigator.userAgent,o="denglian1008_"+Date.now().toString(),s=function(){function t(t,n,r,s,i,u){void 0===n&&(n="denglian1008"),void 0===r&&(r=Date.now()),void 0===s&&(s=window.location.href),void 0===i&&(i=o),void 0===u&&(u=e),this.type=t,this.userID=n,this.time=r,this.url=s,this.reqId=i,this.ua=u}return t.prototype.toJSON=function(){return{type:this.type,userID:this.userID,time:this.time,ua:this.ua,url:this.url}},t}(),i=function(t){function e(n,r,e,o){var s=t.call(this,"HTTPMessage")||this;return s.httpType=n,s.status=r,s.requestURL=e,s.method=o,s}return n(e,t),e.prototype.toJSON=function(){return r(r({},t.prototype.toJSON.call(this)),{httpType:this.httpType,status:this.status,requestURL:this.requestURL,method:this.method})},e}(s),u=function(){function t(){}return t.push=function(n){t.stack.push(n)},t.clear=function(){t.stack=[]},t.getLength=function(){return t.stack.length},t.upload=function(){console.log(t.stack.map((function(t){return t.toJSON()}))),t.clear()},t.startTimer=function(){t.intervalTimer&&clearInterval(t.intervalTimer),t.intervalTimer=setInterval((function(){t.upload()}),1e4)},t.setup=function(){t.startTimer()},t.intervalTimer=null,t.stack=[],t}(),a=function(){function t(){}return t.setup=function(){var t,n,r;t=XMLHttpRequest.prototype,n=t.send,r=t.open,t.open=function(){return this._method=arguments[0],this._url=arguments[1],r.apply(this,arguments)},t.send=function(t){var r=this,e=this._method;return this.addEventListener("loadstart",(function(){u.push(new i("start",r.status,r._url,e))})),this.addEventListener("loadend",(function(){u.push(new i("end",r.status,r.responseURL,e))})),this.addEventListener("error",(function(){u.push(new i("error",r.status,r._url,e))})),n.apply(this,arguments)}},t}(),c=function(t){function e(n,r){var e=t.call(this,"JavaScriptError")||this;return e.errorMessage=n,e.errorStack=r,e}return n(e,t),e.prototype.toJSON=function(){return r(r({},t.prototype.toJSON.call(this)),{errorMessage:this.errorMessage,errorStack:this.errorStack})},e}(s),p=function(){function t(){}return t.setup=function(){var n=console.error;console.error=function(){if(!t.jsMonitorStart){var r=arguments[0]&&arguments[0].message,e=0,o=0,s=arguments[0]&&arguments[0].stack;s||(s=arguments[0]),t.addMessage(r,e,o,s)}return n.apply(console,arguments)},window.onerror=function(n,r,e,o,s){t.jsMonitorStart=!0;var i=s?s.stack:null;t.addMessage(n,e,o,i)}},t.addMessage=function(t,n,r,e){u.push(new c(t+":"+n+":"+r,e))},t.jsMonitorStart=!1,t}(),l=function(t){function e(n,r){var e=t.call(this,"SourceLoadError")||this;return e.sourceURL=n,e.typeName=r,e}return n(e,t),e.prototype.toJSON=function(){return r(r({},t.prototype.toJSON.call(this)),{sourceURL:this.sourceURL,typeName:this.typeName})},e}(s),f=function(){function t(){}return t.setup=function(){window.addEventListener("error",(function(n){var r,e=null===(r=null==n?void 0:n.target)||void 0===r?void 0:r.localName,o="";"link"===e?o=n.target.href:"script"===e&&(o=n.target.src),t.addMessage(o,e)}),!0)},t.addMessage=function(t,n){u.push(new l(t,n))},t}(),h=function(){function t(){}return t.setup=function(){p.setup(),f.setup(),a.setup()},t}();u.setup(),h.setup();
//# sourceMappingURL=index.js.map
